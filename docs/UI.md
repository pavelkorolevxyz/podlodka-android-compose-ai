# Рекомендации по UI-слою

Этот документ содержит требования к реализации UI с использованием Jetpack Compose и дизайн-системы проекта.

```xml
<ui>
    <!-- Эти требования важнее упомянутых в остальных файлах -->

    <task>
        <item>Макет экрана предоставлен в виде скриншота или урезанного json файла из Figma API</item>
        <item>Компоненты и дизайн-системы представлены в виде XML файла с сигнатурами функций и классов, без деталей реализации</item>
        <item>UI код должен быть написан на Kotlin и Jetpack Compose</item>
        <item>Подразумевается адаптивная вёрстка. Элементы должны нормально смотреться на разных экранах и с разным размером шрифта</item>
        <item>Modifier padding более предпочтительны, чем фиксированные размеры</item>
        <item>Никогда НЕ верстай системный статус-бар, который видишь на макетах</item>
        <item>Если ты решил добавить @Composable Icon, тогда добавляй designsystem.component.icon.Icon</item>
    </task>

    <design-system>
        <item>Не используй никакие Material импорты или зависимости в коде</item>
        <item>Используй только компоненты нашей дизайн-системы (модуль :design-system)</item>
        <item>Не переопределяй значения в параметрах компонентов, если они соответствуют дефолтным</item>
        <item>Всегда переопределяй значения, если дефолтные значения отличаются от нужных</item>
        <item>Хардкодить цвета, шрифты и формы строго не рекомендуется</item>
        <item>Цвета темы можно использовать через CustomTheme.colors</item>
        <item>Шрифты темы можно использовать через CustomTheme.typography</item>
        <item>Формы темы можно использовать через CustomTheme.shapes</item>
        <item>Шрифты подбирай по названию или по идентификатору, а не по параметрам</item>
    </design-system>

    <icons>
        <item>Если тебе нужна хоть одна иконка, то импортируй все таким вайлдкардом `import designsystem.icons.*`</item>
        <item>Доступ к иконкам осуществляется через `object CustomIcons` следующим образом: `CustomIcons.Arrows.ArrowDefaultLeftOutlined`, где `Arrows` это группа, а `ArrowDefaultLeftOutlined` это название конкретной иконки. Группа указывается обязательно и через точку</item>
        <item>Перепроверяй группу у конкретной иконки, иначе код не соберётся</item>
        <item>Не добавляй новые иконки. Используйте `CustomIcons.Misc.Placeholder`, если не получается найти нужную</item>
        <item>Никогда не используй иконки не обёрнутые в Composable функцию `Icon()`, за исключением случаев когда параметр принимает `ImageVector`</item>
    </icons>

    <composables>
        <item>Предпочитай stateless Composable функции</item>
        <item>Все строки передаются из стейта экрана (data class) с презентационного слоя</item>
        <item>Всегда проверяй, что нет существующего UI компонента, который ты хочешь сделать с нуля</item>
        <item>Всегда проверяй, что вверху экрана может быть TopAppBar</item>
        <item>Для блоков с цветами `CustomTheme.colors.action` рассмотри возможность использовать `CustomButton`, `IconButton`</item>
        <item>Кликабельные иконки всегда заворачивай в `IconButton`</item>
        <item>По возможности используй Standard реализации. Например, CustomStandardButton для кнопок. Это более строгая версия компонентов</item>
        <item>Не перепутай радио-кнопки, свитчи и чекбоксы с иконками. Если по логике компонента иконка может быть в двух состояниях, то вероятно это что-то из них</item>
        <item>Для разделителей в списках используй Divider</item>
        <item>Не используй CellItem там, где можно обойтись другими компонентами. CellItem используется только в списках, где элементов подразумеваетсямного и они должны выделяться от фона</item>
        <item>Всегда переопределяй shape у компонента `Card`</item>
        <item>Если ты распознал `Progress bar`, то используй `LinearProgressIndicator`</item>
    </composables>

    <preview>
        <item>Всегда добавляй Preview экрана или компонентов с помощью аннотации `androidx.compose.ui.tooling.preview.PreviewLightDark`</item>
        <item>Внутри Preview всегда в корне нужно использовать `CustomTheme {...}` для правильного показа токенов</item>
        <item>Для Preview экрана нужно сделать отдельную реализацию Decompose компонента снаружи самой функции, переопределяющую стейт. Пример в документации по архитектуре.</item>
        <item>При необходимости с помощью Preview можно показать разные состояния компонента</item>
    </preview>
    
    <surface>
        <item>По умолчанию вложенные друг в друга Surface влияют на цвет фона с помощью `LocalDepth.current`</item>
        <item>Никогда не используй `CustomTheme.colors.surface` цвета. Оборачивай эти блоки в `Surface/Scaffold/Card`, у которых есть параметр `depth` с правильным дефолтным значением</item>
        <item>Если блоки лежащие друг в друге не отличаются по цвету, то их оборачивать в `Surface/Scaffold/Card` не рекомендуется</item>
    </surface>
</ui>
```
